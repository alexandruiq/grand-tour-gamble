# 🎯 Cursor Prompt Pack: Build Sequence for The Grand Tour Gamble

This is a modular, step-by-step guide for feeding prompts into Cursor to implement The Grand Tour Gamble. Each section is designed to be a clean, self-contained unit you can copy/paste into Cursor to generate your code.

---

## 🧱 PHASE 1: Foundational Backend + Auth

### 1.1 — Supabase Schema

**Prompt:**

```ts
Create all tables described in this schema.txt file exactly. These include: sessions, users, teams, cyclists, decisions_log, reflections, negotiations. Use Supabase PostgreSQL syntax.
```

### 1.2 — Supabase Auth Setup

**Prompt:**

```ts
Implement Supabase Auth. Use email-based login. No password, only magic link. Add logic to create a new user entry in the users table after login.
```

### 1.3 — Load Static Markdown Content

**Prompt:**

```ts
Create a function that loads .md files from Supabase Storage and renders them using MDX. These files include game-rules.md, negotiation-guide.md, team-rubicon.md, stage-1.md to stage-10.md.
```

---

## 🧑‍🏫 PHASE 2: Trainer Flow

### 2.1 — Admin Session Creation Page

**Prompt:**

```ts
Build the /admin page. It should:
- Allow creation of a new session (auto-generate unique trainer code)
- Let the trainer input session title and trainer name
- On submit, write to Supabase `sessions` table and return session code
```

### 2.2 — Trainer Dashboard Page

**Prompt:**

```ts
Build /trainer/[sessionId] dashboard. Components include:
- Start Stage / End Stage button
- Lock / Unlock Decision button
- Live Scoreboard (team + individual)
- Stage Number + Multiplier Viewer
- Copy Cyclist Codes section (based on teams/cyclists created)
```

---

## 🚴 PHASE 3: Player Flow

### 3.1 — Player Login Page

**Prompt:**

```ts
Build the / route. It should:
- Ask for Trainer Code + Team Name
- On submit, associate user with session and team via Supabase
- Auto-generate or select cyclist
```

### 3.2 — Game View for Cyclist

**Prompt:**

```ts
Build /game page. Components:
- Character image and backstory modal
- Stage map renderer
- Decision Buttons: Sprint / Cruise
- Individual + Team Points
- Fatigue bar, Synergy bar
- Reflection state message (if active)
- Rules Modal, Decisions Modal, Scoreboard Modal
```

---

## ⚙️ PHASE 4: Game Logic

### 4.1 — Edge Function

**Prompt:**

```ts
Build an edge function called calculateStageResults.
- Triggered when trainer clicks End Stage
- Reads all decisions for current stage
- Applies matrix to calculate points, synergy, fatigue
- Updates Supabase: cyclists, teams, decisions_log
- If stage === 10, mark session as completed
```

---

## 🧠 PHASE 5: Reflection + Debrief

### 5.1 — Reflection Visual Toggle

**Prompt:**

```ts
Add logic to show a "Reflection Mode" banner after decisions are locked by trainer. During this time, no action buttons are clickable.
```

### 5.2 — Debrief Routing

**Prompt:**

```ts
Once session.status === 'completed', route players to /debrief and trainer to /trainer/debrief. Implement this logic in useEffect hooks.
```

### 5.3 — Debrief Pages

**Prompt:**

```ts
Build two components:
- /debrief: Show player’s decisions, synergy contribution, fatigue graph, solo/team balance badge
- /trainer/debrief: Show team summary, decision heatmap, fatigue chart, top players
```

---

## 📦 PHASE 6: Extras + Final Polish

### 6.1 — AI Engine

**Prompt:**

```ts
Create a utility that generates AI decisions based on team profile (Solaris, Corex, Vortex). Use static % logic (e.g. 70% cruise, 30% sprint).
```

### 6.2 — Add Animations & Loading States

**Prompt:**

```ts
Add fade transitions for each modal, animated counter for scores, loading spinners for Supabase fetches.
```

### 6.3 — Mobile Optimization

**Prompt:**

```ts
Make all main player and trainer views responsive with tailwind breakpoints. Prioritize usability on mobile phones and tablets.
```

---

✅ Use each prompt above to safely guide Cursor from zero to full game implementation. Each phase builds upon the last. Let me know when you want the prompts bundled as .txt or .json to import directly.

