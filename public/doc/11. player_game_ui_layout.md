
The Grand Tour Gamble — Player View Page Design
===============================================

📄 Page: /game (Cyclist Dashboard)

This is the main interaction page for players managing a cyclist during a stage of the game.

-------------------------------------------------------------
🎨 Layout Overview:

 -----------------------------------------------------
| Cyclist Image       | Stage Description            |
| (Top-Left)          | - Stage name (e.g. Stage 5)  |
|                     | - Narrative setup            |
|                     | - Negotiation badge (if any) |
| Sprint Button       |                              |
| Cruise Button       |                              |
|                     |                              |
| Rules Button        |                              |
|                     |                              |
|---------------------|------------------------------|
|   ⬇ Bottom Panel: Game Info + Actions              |
 -----------------------------------------------------
| [Team Standings]  [Individual Standings]           |
| [Last Stage Choices] [Your Stats / Stamina]        |
 -----------------------------------------------------

-------------------------------------------------------------
🧩 Components to Create:

1. CyclistCardDisplay.tsx
   - Top-left placement
   - Show name + image + hoverable tooltip or cupboard animation with backstory
   - Data: Supabase > cyclists

2. DecisionButtons.tsx
   - Below cyclist image
   - Sprint / Cruise
   - Disable after submission or stage lock
   - Data: session.stage_open + decisions_log

3. StageDescription.tsx
   - Top-right panel
   - Pull from game-decisions.md
   - Shows negotiation badge if stage is a negotiation stage
   - Multiplier label if active

4. StaminaBar.tsx
   - Part of bottom stats
   - Range: 0–5
   - Penalty/fatigue marker
   - Data: cyclists.stamina

5. TeamScoreboard.tsx
   - Tabbed view
   - Team leaderboard from teams.total_points
   - Individual leaderboard from cyclists.current_points

6. StageHistoryView.tsx
   - Button to show "Last Stage Decisions"
   - Table view grouped by team
   - Data: decisions_log from last completed stage

7. PlayerStatsPanel.tsx
   - Show:
     • Stage number
     • Score
     • Stamina
     • Multiplier (if any)
     • Sprint count

8. RulesModal.tsx
   - Opens from “View Rules” button
   - Animate as a cupboard flip effect (framer-motion or CSS transitions)
   - Content from game-rules.md

9. BackstoryModal.tsx
   - On hover or click on CyclistCard
   - Flip/cupboard open effect
   - Render from backstory .md file (cyclist-specific)

10. StatusBanner.tsx
    - Shows when stage is locked: “Waiting for stage to start…”
    - Or: “Negotiation Round in Progress”
    - Styled as floating banner above stage section

-------------------------------------------------------------
🔗 Supabase Integration Required:

- users: identify current player, fetch assigned cyclist
- cyclists: stamina, fatigue, points, backstory
- teams: synergy score, total points
- sessions: stage open boolean, current stage, multiplier
- decisions_log: record current choice, show past choices

-------------------------------------------------------------
🧠 UX Enhancements:

- Lock decision buttons visually once submitted
- Use Supabase Realtime to reflect stats/leaderboard in real-time
- Countdown timer visual (no triggers)
- Animated transitions for rules and backstory (“cupboard” style)
- Floating badge: negotiation or reflection round active

-------------------------------------------------------------

🕒 Last updated: 2025-08-02 15:23:09
