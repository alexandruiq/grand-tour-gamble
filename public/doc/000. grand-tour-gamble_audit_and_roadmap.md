# ✅ MASTER AUDIT: Updated Assets & Cursor Integration Guide

Absolutely — let’s do a Master Audit and then define a Prioritized Implementation Roadmap for launching **The Grand Tour Gamble** inside Cursor with confidence, speed, and clarity. This version reflects **all recent updates**, including the debrief system, lifecycle tracking, and component prompts.

---

## ✅ MASTER AUDIT: Current Assets & Coverage

| Area                        | Status              | Notes                                                                                        |
| --------------------------- | ------------------- | -------------------------------------------------------------------------------------------- |
| 1. Game Rules & Mechanics   | ✅ COMPLETE          | Final .txt and .md files created with clear synergy, stamina, scoring, and multiplier logic. |
| 2. Cyclist Backstories      | ✅ COMPLETE          | All four cyclist bios updated to promote solo illusion and roleplay.                         |
| 3. Stage Descriptions       | ✅ COMPLETE          | All 10 stage names + immersive flavor texts. Cosmetic only.                                  |
| 4. Stage Map Visual         | ✅ COMPLETE          | High-quality realistic terrain map with stage names finalized.                               |
| 5. Markdown Content System  | ✅ COMPLETE          | Rules, stages, bios, negotiation, debrief—rendered via MDX.                                  |
| 6. Player View Layout       | ✅ COMPLETE          | Layout structured: cyclist image, buttons, stats, and modals.                                |
| 7. Supabase Schema          | ✅ COMPLETE          | Tables: sessions, teams, cyclists, decisions\_log, users, negotiations, reflections.         |
| 8. Edge Function Spec       | ✅ CODE PROMPT READY | Final scoring logic and fatigue/synergy matrix written.                                      |
| 9. Trainer Dashboard        | ✅ COMPLETE          | Includes session control, scoreboards, and stage control.                                    |
| 10. Live Scoreboard         | ✅ COMPLETE          | Individual and team boards with rank logic and display control.                              |
| 11. AI Rival Team Logic     | ✅ COMPLETE          | Three AI teams with % decision profiles (Solaris, Corex, Vortex).                            |
| 12. Negotiation System      | ✅ COMPLETE          | Multiplier badge system, toggle control, and display plan.                                   |
| 13. Reflection & Debrief    | ✅ COMPLETE          | Post-stage reflection + dynamic debrief views for players/trainers.                          |
| 14. Debrief Redirect Logic  | ✅ COMPLETE          | Lifecycle status → redirect routing implemented.                                             |
| 15. Debrief Components      | ✅ COMPLETE          | PlayerDebrief.tsx and TrainerDebrief.tsx prompts ready.                                      |
| 16. UI Components Structure | ✅ COMPLETE          | Full directory structure + folder responsibilities finalized.                                |
| 17. Cursor Prompts + Files  | ✅ COMPLETE          | .txt and .md files ready for import; all components scoped.                                  |

🔍 **Gaps?**
None. All required logic, routes, flows, and markdowns are scoped and ready.

---

## 🚀 IMPLEMENTATION ROADMAP (Cursor Build Plan)

### PHASE 1: Foundational Backend + Auth

* ✅ Set up Supabase project and all required tables (schema.txt)
* 🔐 Implement Supabase Auth (email-based or token via trainer code)
* 🗃️ Configure sessions, teams, cyclists, users with default values
* 📦 Upload all `.md` content to Supabase Storage for rendering

### PHASE 2: Admin & Trainer Flow

* 🧱 `/admin`: Build session creation and trainer code gen
* 🧱 `/trainer`: Build dashboard with stage control and scoreboard
* 🎛️ Add CyclistCodes.tsx, SessionList.tsx, StageController.tsx
* 📈 Live scoreboard page with team + individual ranking (Realtime)

### PHASE 3: Player Flow

* 👤 `/game`: Build cyclist dashboard
* Cyclist card (image + backstory modal)
* Stage description renderer
* Sprint/Cruise action buttons
* Stamina bar, synergy meter, team/individual scoreboards
* 📜 Buttons: Rules, Leaderboard, Past Decisions, Reflection
* 🎯 Submit decision to `decisions_log`
* ⏳ Reflection state toggle (visual state only)

### PHASE 4: Game Engine Logic

* ⚙️ Implement `calculateStageResults.ts` edge function:

  * Triggered from trainer panel at end of stage
  * Applies decision matrix, scoring, synergy, stamina updates
  * Logs results and updates Supabase tables
* 🤖 Add rival AI team behavior (configurable % cruise/sprint)
* 🔁 Sync scores after every stage

### PHASE 5: Negotiation + Debrief

* 📣 Negotiation badge system:

  * Multiplier component visible in player view
  * Toggled by trainer pre-stage
* 📊 Build `/debrief` and `/trainer/debrief` views

  * PlayerDebrief.tsx (final score, synergy, decisions, message)
  * TrainerDebrief.tsx (full team heatmaps, ranks, charts)

### PHASE 6: Polish & Performance

* 🧼 Add loading, error, and empty states
* 🎨 Add subtle animations (fade in/out, number transitions)
* 📱 Fully responsive UI for mobile/tablet
* 🧠 Optimize logic with caching/memoization where needed

---

## 📌 Best Practices for Smooth Cursor Development

| Tip                           | Why It Matters                                            |
| ----------------------------- | --------------------------------------------------------- |
| Use `.txt` for prompts        | Cleaner AI understanding; reusable prompt logic           |
| Feed markdown to MDX pages    | Keeps content out of logic and into clean, editable files |
| Lock schema early             | Avoid mismatch between logic and backend                  |
| Use mock Supabase JSON        | Speeds up front-end dev without backend dependence        |
| Keep role-specific folders    | Clear separation of player, trainer, admin views          |
| Load markdown after logic     | Prevents hydration errors or load glitches                |
| One component per Cursor task | Keeps prompt clean, reduces hallucination risk            |
| Watch useEffect/subscriptions | Avoid infinite loops and render flickers                  |

---

✅ **You Are Now 95% READY**

You've mapped the game mechanics, logic, narrative, Supabase schema, and UI structure. Cursor is ready to build from it.

Let me know when you're ready to:

* Generate the Edge Function
* Start building `/admin`, `/trainer`, or `/game`
* Auto-generate Supabase queries for debrief or scoring stats
