# Frontend Logic for The Grand Tour Gamble Game

## 1. Player View (Next.js)
- Login with unique code (stored in Supabase users.assigned_code)
- Fetch session + cyclist data upon entry
- Show cyclist stats, current stage, previous choices
- Choose: Sprint or Cruise → Submit via Supabase mutation to decisions_log
- Disable form after submission to prevent multiple entries

## 2. Trainer Dashboard
- Live leaderboard via Supabase Realtime for teams & cyclists
- Stage progress controller to move to next stage
- View cyclist submissions in real time
- Optional: Trigger negotiation windows + reflections

## 3. Game Flow Logic
- After every stage:
  - Trainer confirms submission lock
  - Backend (or edge function) processes all decisions:
    - Apply point logic based on player choices (Prisoner’s Dilemma matrix)
    - Adjust stamina and synergy
    - Update team and individual scores

## 4. Supabase Usage
- Supabase Realtime: keep dashboards synced
- Supabase Auth: for secure code-based logins
- Supabase Edge Functions: (optional) to evaluate and calculate scores
- Supabase Storage: store markdown for history, rules, and game data

## 5. UX Recommendations
- Show countdown before each decision window closes
- Live feedback on current rankings + upcoming stage type
- Stage color/thematic backgrounds for immersion