
# LANDING PAGE SPEC — THE GRAND TOUR GAMBLE

This spec defines **two separate login flows** for:

1. 🚴 Players (Cyclist Controllers)
2. 🎛️ Trainer/Admin (Game Controller)

Each route serves a different audience and uses a different authentication strategy.

---

## 1. `/` — Player Landing Page

### Purpose
This is the entry point for participants who will manage a single cyclist during the game session. They do **not** use email login. They join via a unique **Cyclist Join Code** given by the trainer.

### UI Components
- 🆔 Input: `Cyclist Join Code` (6-character string)
- 🔤 Input: `Team Name` (user-defined)
- 🎯 Button: `Join Game`

### Validation Logic
- On submit, check if the `join_code` exists in the `cyclist_codes` table in Supabase
- Fetch `session_id` and `cyclist_id` for that code
- Store a lightweight user session in `localStorage`:
  - `session_id`
  - `cyclist_id`
  - `team_name`
  - `cyclist_name` (optional, for display)

### Behavior
- If join code is valid → Redirect to `/game`
- If invalid → Show error message
- No Supabase Auth required (no email/password)

### Supabase Tables Used
- `cyclist_codes`
- `users` or `participants` (optional: insert with metadata)
- `sessions` (indirectly, via join code linkage)

---

## 2. `/trainer` — Trainer Login Page

### Purpose
For trainers running the game. Requires full Supabase Auth to access admin panels and dashboards.

### UI Components
- 📧 Input: `Email`
- 🔒 Input: `Password`
- 📤 Button: `Log In`

### Behavior
- On successful Supabase Auth login → Redirect to `/trainer/sessions`
- Store Supabase session token
- Use role-based protection on `/trainer/*` routes

### Supabase Integration
- Use standard `supabase.auth.signInWithPassword`
- Protect routes via `useUser()` or Supabase session check

---

## Routing Overview

| Route             | Audience   | Auth Method        | Destination |
|------------------|------------|--------------------|-------------|
| `/`              | Players    | Code-based only    | `/game`     |
| `/trainer`       | Trainers   | Supabase Auth      | `/trainer/sessions` |

---

## Additional Notes
- Player page is always public (no login required)
- Trainer page is protected and should never be exposed to players
- Use role-based access guards where needed

---

## Optional Enhancements
- Add loading states after clicking “Join Game”
- Store last used `team_name` in localStorage for smoother restarts
- Redirect logged-in trainers away from `/` and toward `/trainer`
