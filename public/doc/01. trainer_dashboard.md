
CLAUDE 4 PROMPT: Create Trainer Session Dashboard for “The Grand Tour Gamble”

You are a development assistant inside Cursor using Claude 4. Your goal is to build a modular and efficient Admin Dashboard in a Next.js (App Router) + Supabase environment for a training game called The Grand Tour Gamble. This dashboard is used by trainers to create sessions, generate unique cyclist codes, and monitor gameplay. The game is always played in teams of 4 cyclists, each managed by a group of 3–4 participants. Keep components clean, minimal, and reusable — no bloated UI.

CONTEXT & GAME STRUCTURE

- Fixed team size: 4 cyclists per game session
- Each cyclist is managed by a group of users
- Users join using a code assigned per cyclist
- These codes are tied to the session and stored in Supabase
- Participants only manage one cyclist per session
- Session data (name, trainer, status, etc.) must be stored in Supabase

MARKDOWN INTEGRATION

The app uses the following `.md` files to present rich game content in-app (no hardcoded text in components):

| Filename             | Purpose                                    |
|----------------------|--------------------------------------------|
| game-history.md      | The story and world behind the game        |
| game-rules.md        | All mechanics, win conditions, decisions   |
| game-decisions.md    | Stage details and Sprint/Cruise options    |
| game-negotiation.md  | Prompts for team negotiation & reflection  |
| game-debrief.md      | End-of-game debrief questions              |

Each page where these are needed should read and render them via MDX or Markdown parser.

DATABASE: Supabase Tables (Required)

sessions table

| Column         | Type      | Description                                  |
|----------------|-----------|----------------------------------------------|
| id             | UUID (PK) | Unique session ID                            |
| trainer_id     | UUID      | FK to users table                            |
| name           | TEXT      | Name of session                              |
| created_at     | TIMESTAMP | Auto-filled                                  |
| status         | ENUM      | not_started, active, ended                   |

cyclist_codes table

| Column         | Type      | Description                                       |
|----------------|-----------|---------------------------------------------------|
| id             | UUID (PK) | Unique code ID                                    |
| session_id     | UUID      | FK to sessions table                              |
| cyclist_name   | TEXT      | e.g. "Luca Moretti"                               |
| code           | TEXT      | Unique join code for that cyclist (e.g. 9M2XJK)   |
| assigned_to    | UUID      | FK to users table (optional)                      |

PAGES TO CREATE

1. /trainer/sessions

- Create new session
  - Input: name
  - On submit: create sessions row and 4 cyclist_codes rows (pre-filled cyclist names + codes)
- List of sessions (card/table view)
  - Actions per session:
    - View Codes
    - Start / End Session
    - Delete session
    - Link to Scoreboard

2. /trainer/sessions/[sessionId]/codes

- Show all 4 cyclists and their join codes
- Copy/share buttons
- Show whether a code is claimed or unclaimed

COMPONENTS TO USE

| Component           | Purpose                                  |
|---------------------|------------------------------------------|
| SessionForm.tsx     | Create session with auto-code generation |
| CyclistCodes.tsx    | Show 4 generated codes                   |
| SessionList.tsx     | Overview of all trainer sessions         |
| TrainerLayout.tsx   | Consistent wrapper for admin routes      |
| useSupabaseClient   | Fetch/create sessions & codes            |

RULES FOR CLAUDE

1. Use Supabase client securely for all DB actions
2. Generate readable and unique 6-character codes for cyclist join (e.g., X3J7KV)
3. Keep UI components clean, not bloated, Tailwind-only styling
4. Link .md files where appropriate: use game-history.md, game-rules.md, etc.
5. Ensure cyclists are hardcoded for now (4 per session: Luca, Jonas, Mateo, Kenji)
6. Include links to view live scoreboard for any session once started

EXAMPLE WORKFLOW

1. Trainer visits /trainer/sessions
2. Clicks “Create Session”, enters name
3. A session is created with:
   - status = not_started
   - 4 codes linked to cyclists (Luca, Jonas, Mateo, Kenji)
4. Trainer sees session card and clicks “View Codes”
5. Trainer distributes each code to a group
6. Participants enter code on join screen → they control that cyclist
7. Trainer clicks “Start Session” to activate it
8. From now on, scoreboard and decisions are live
